<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>WTP space convergence issues in other packages</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">WTP space convergence issues in other
packages</h1>



<p>Given the non-linear utility specification of WTP space models, these
models often diverge during estimation and can be highly sensitive to
starting parameters. While many other packages support the estimation of
WTP space models, in practice these packages often fail to find
solutions.</p>
<p>Compared to most other packages, {logitr} tends to perform better and
converge more often. It also has a built-in, parallelized multi-start
optimization loop for searching for different local minima from
different random starting points when minimizing the negative
log-likelihood, which improves the odds of converging to a solution for
at least some of the multi-start iterations.</p>
<p>This vignette illustrates the convergence issues, comparing the
performance of {logitr} to the following R packages that support WTP
space models:</p>
<ul>
<li>{logitr}</li>
<li>{mixl}</li>
<li>{mlogit}</li>
<li>{gmnl}</li>
<li>{apollo}</li>
</ul>
<p>For the same mixed logit WTP space model, only {logitr} is able to
consistently converge to a solution.</p>
<div id="setup" class="section level1">
<h1>Setup</h1>
<div id="basic-settings" class="section level2">
<h2>Basic settings</h2>
<p>First load the required packages:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(logitr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mlogit)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gmnl)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(apollo)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mixl)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span></code></pre></div>
<p>Now set the starting parameters for each package as well as the
number of draws to use for the simulated log-likelihood:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>numDraws_wtp <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>start_wtp <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">scalePar        =</span> <span class="dv">1</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">feat            =</span> <span class="dv">0</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">brandhiland     =</span> <span class="dv">0</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">brandweight     =</span> <span class="dv">0</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">brandyoplait    =</span> <span class="dv">0</span>,</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_feat         =</span> <span class="fl">0.1</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_brandhiland  =</span> <span class="fl">0.1</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_brandweight  =</span> <span class="fl">0.1</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd_brandyoplait =</span> <span class="fl">0.1</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Take only half of the yogurt data to speed things up:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>yogurt <span class="ot">&lt;-</span> <span class="fu">subset</span>(logitr<span class="sc">::</span>yogurt, logitr<span class="sc">::</span>yogurt<span class="sc">$</span>id <span class="sc">&lt;=</span> <span class="dv">50</span>)</span></code></pre></div>
</div>
<div id="package-specific-settings" class="section level2">
<h2>Package-specific settings</h2>
<p>Both {apollo} and {mixl} require that the user hand-specify the model
to be estimated as well as several other settings. These settings are
provided here.</p>
<div id="prep-for-gmnl" class="section level3">
<h3>Prep for {gmnl}</h3>
<p>Convert the yogurt data for into the format required for {gmnl}</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>data_gmnl <span class="ot">&lt;-</span> <span class="fu">mlogit.data</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">data     =</span> yogurt,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">shape    =</span> <span class="st">&quot;long&quot;</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">choice   =</span> <span class="st">&quot;choice&quot;</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">id.var   =</span> <span class="st">&#39;id&#39;</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">alt.var  =</span> <span class="st">&#39;alt&#39;</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">chid.var =</span> <span class="st">&#39;obsID&#39;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="prep-for-apollo" class="section level3">
<h3>Prep for {apollo}</h3>
<p>Format the <code>yogurt</code> data to a “wide” format for
{apollo}</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>yogurt_price <span class="ot">&lt;-</span> yogurt <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(id, obsID, price, brand) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">price =</span> <span class="sc">-</span><span class="dv">1</span><span class="sc">*</span>price) <span class="sc">%&gt;%</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from  =</span> <span class="st">&#39;brand&#39;</span>,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> <span class="st">&#39;price&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">price_dannon  =</span> dannon,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">price_hiland  =</span> hiland,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">price_weight  =</span> weight,</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">price_yoplait =</span> yoplait)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>yogurt_feat <span class="ot">&lt;-</span> yogurt <span class="sc">%&gt;%</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(id, obsID, feat, brand) <span class="sc">%&gt;%</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">names_from =</span> <span class="st">&#39;brand&#39;</span>,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">values_from =</span> <span class="st">&#39;feat&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">feat_dannon  =</span> dannon,</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">feat_hiland  =</span> hiland,</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">feat_weight  =</span> weight,</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">feat_yoplait =</span> yoplait)</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>yogurt_choice <span class="ot">&lt;-</span> yogurt <span class="sc">%&gt;%</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(choice <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(id, obsID, <span class="at">choice =</span> alt)</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>data_apollo <span class="ot">&lt;-</span> yogurt_price <span class="sc">%&gt;%</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(yogurt_feat, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;id&#39;</span>, <span class="st">&#39;obsID&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(yogurt_choice, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&#39;id&#39;</span>, <span class="st">&#39;obsID&#39;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(id, obsID) <span class="sc">%&gt;%</span></span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">av_dannon  =</span> <span class="dv">1</span>,</span>
<span id="cb5-31"><a href="#cb5-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">av_hiland  =</span> <span class="dv">1</span>,</span>
<span id="cb5-32"><a href="#cb5-32" aria-hidden="true" tabindex="-1"></a>      <span class="at">av_weight  =</span> <span class="dv">1</span>,</span>
<span id="cb5-33"><a href="#cb5-33" aria-hidden="true" tabindex="-1"></a>      <span class="at">av_yoplait =</span> <span class="dv">1</span></span>
<span id="cb5-34"><a href="#cb5-34" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p>Define the {apollo} probabilities function</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>apollo_probabilities_wtp <span class="ot">&lt;-</span> <span class="cf">function</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  apollo_beta, apollo_inputs, <span class="at">functionality =</span> <span class="st">&quot;estimate&quot;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>) {</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="do">### Attach inputs and detach after function exit</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">apollo_attach</span>(apollo_beta, apollo_inputs)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">on.exit</span>(<span class="fu">apollo_detach</span>(apollo_beta, apollo_inputs))</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="do">### Create list of probabilities P</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    P <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="do">### List of utilities: these must use the same names as in mnl_settings,</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">#   order is irrelevant</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    V <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    V[[<span class="st">&quot;dannon&quot;</span>]] <span class="ot">&lt;-</span> scalePar <span class="sc">*</span> (b_feat <span class="sc">*</span> feat_dannon <span class="sc">-</span> price_dannon)</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    V[[<span class="st">&quot;hiland&quot;</span>]] <span class="ot">&lt;-</span> scalePar <span class="sc">*</span> (b_brandhiland <span class="sc">+</span> b_feat <span class="sc">*</span> feat_hiland <span class="sc">-</span> price_hiland)</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    V[[<span class="st">&quot;weight&quot;</span>]] <span class="ot">&lt;-</span> scalePar <span class="sc">*</span> (b_brandweight <span class="sc">+</span> b_feat <span class="sc">*</span> feat_weight <span class="sc">-</span> price_weight)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    V[[<span class="st">&quot;yoplait&quot;</span>]] <span class="ot">&lt;-</span> scalePar <span class="sc">*</span> (b_brandyoplait <span class="sc">+</span> b_feat <span class="sc">*</span> feat_yoplait <span class="sc">-</span> price_yoplait)</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    <span class="do">### Define settings for MNL model component</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    mnl_settings <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">alternatives =</span> <span class="fu">c</span>(<span class="at">dannon =</span> <span class="dv">1</span>, <span class="at">hiland =</span> <span class="dv">2</span>, <span class="at">weight =</span> <span class="dv">3</span>, <span class="at">yoplait =</span> <span class="dv">4</span>),</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">avail =</span> <span class="fu">list</span>(</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>          <span class="at">dannon =</span> av_dannon,</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>          <span class="at">hiland =</span> av_hiland,</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>          <span class="at">weight =</span> av_weight,</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>          <span class="at">yoplait =</span> av_yoplait),</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>        <span class="at">choiceVar =</span> choice,</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>        <span class="at">utilities =</span> V</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>    <span class="do">### Compute probabilities using MNL model</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>    P[[<span class="st">&quot;model&quot;</span>]] <span class="ot">&lt;-</span> <span class="fu">apollo_mnl</span>(mnl_settings, functionality)</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    <span class="do">### Take product across observation for same individual</span></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>    P <span class="ot">&lt;-</span> <span class="fu">apollo_panelProd</span>(P, apollo_inputs, functionality)</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>    <span class="do">### Average across inter-individual draws</span></span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>    P <span class="ot">=</span> <span class="fu">apollo_avgInterDraws</span>(P, apollo_inputs, functionality)</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>    <span class="do">### Prepare and return outputs of function</span></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>    P <span class="ot">&lt;-</span> <span class="fu">apollo_prepareProb</span>(P, apollo_inputs, functionality)</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(P)</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Define random parameters function</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>apollo_randCoeff <span class="ot">&lt;-</span> <span class="cf">function</span>(apollo_beta, apollo_inputs) {</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    randcoeff <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    randcoeff[[<span class="st">&#39;b_feat&#39;</span>]] <span class="ot">&lt;-</span> feat <span class="sc">+</span> d_feat <span class="sc">*</span> sd_feat</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    randcoeff[[<span class="st">&#39;b_brandhiland&#39;</span>]] <span class="ot">&lt;-</span> brandhiland <span class="sc">+</span> d_brandhiland <span class="sc">*</span> sd_brandhiland</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    randcoeff[[<span class="st">&#39;b_brandweight&#39;</span>]] <span class="ot">&lt;-</span> brandweight <span class="sc">+</span> d_brandweight <span class="sc">*</span> sd_brandweight</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    randcoeff[[<span class="st">&#39;b_brandyoplait&#39;</span>]] <span class="ot">&lt;-</span> brandyoplait <span class="sc">+</span> d_brandyoplait <span class="sc">*</span> sd_brandyoplait</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(randcoeff)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Main control settings for {apollo}</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>apollo_control_wtp <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">modelName       =</span> <span class="st">&quot;MXL_WTP_space&quot;</span>,</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">modelDescr      =</span> <span class="st">&quot;MXL model on yogurt choice SP data, in WTP space&quot;</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">indivID         =</span> <span class="st">&quot;id&quot;</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mixing          =</span> <span class="cn">TRUE</span>,</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">analyticGrad    =</span> <span class="cn">TRUE</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">panelData       =</span> <span class="cn">TRUE</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">nCores          =</span> <span class="dv">1</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Set parameters for generating draws</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>apollo_draws_n <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">interDrawsType =</span> <span class="st">&quot;halton&quot;</span>,</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">interNDraws    =</span> numDraws_wtp,</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">interUnifDraws =</span> <span class="fu">c</span>(),</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">interNormDraws =</span> <span class="fu">c</span>(</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;d_feat&quot;</span>, <span class="st">&quot;d_brandhiland&quot;</span>, <span class="st">&quot;d_brandweight&quot;</span>, <span class="st">&quot;d_brandyoplait&quot;</span>),</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">intraDrawsType =</span> <span class="st">&quot;halton&quot;</span>,</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">intraNDraws    =</span> <span class="dv">0</span>,</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">intraUnifDraws =</span> <span class="fu">c</span>(),</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">intraNormDraws =</span> <span class="fu">c</span>()</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Set input</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>apollo_inputs_wtp <span class="ot">&lt;-</span> <span class="fu">apollo_validateInputs</span>(</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">apollo_beta      =</span> start_wtp,</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">apollo_fixed     =</span> <span class="cn">NULL</span>,</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">database         =</span> data_apollo,</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">apollo_draws     =</span> apollo_draws_n,</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">apollo_randCoeff =</span> apollo_randCoeff,</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">apollo_control   =</span> apollo_control_wtp</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="prep-for-mixl" class="section level3">
<h3>Prep for {mixl}</h3>
<p>Format the <code>yogurt</code> data to a “wide” format for {mixl}</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>data_mixl <span class="ot">&lt;-</span> data_apollo <span class="co"># Uses the same &quot;wide&quot; format as {apollo}</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>data_mixl<span class="sc">$</span>ID <span class="ot">&lt;-</span> data_mixl<span class="sc">$</span>id</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>data_mixl<span class="sc">$</span>CHOICE <span class="ot">&lt;-</span> data_mixl<span class="sc">$</span>choice</span></code></pre></div>
<p>Define the {mixl} utility function</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>mixl_wtp <span class="ot">&lt;-</span> <span class="st">&quot;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="st">    feat_RND = @feat + draw_1 * @sd_feat;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="st">    brandhiland_RND = @brandhiland + draw_2 * @sd_brandhiland;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="st">    brandweight_RND = @brandweight + draw_3 * @sd_brandweight;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="st">    brandyoplait_RND = @brandyoplait + draw_4 * @sd_brandyoplait;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="st">    U_1 = @scalePar * (feat_RND * $feat_dannon - $price_dannon);</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="st">    U_2 = @scalePar * (brandhiland_RND + feat_RND * $feat_hiland - $price_hiland);</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="st">    U_3 = @scalePar * (brandweight_RND + feat_RND * $feat_weight - $price_weight);</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="st">    U_4 = @scalePar * (brandyoplait_RND + feat_RND * $feat_yoplait - $price_yoplait);</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>mixl_spec_wtp <span class="ot">&lt;-</span> <span class="fu">specify_model</span>(mixl_wtp, data_mixl)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>availabilities <span class="ot">&lt;-</span> <span class="fu">generate_default_availabilities</span>(data_mixl, <span class="dv">4</span>)</span></code></pre></div>
</div>
</div>
</div>
<div id="estimate-wtp-space-models" class="section level1">
<h1>Estimate WTP space models</h1>
<p>The same model is now estimated using all five packages.</p>
<div id="logitr" class="section level2">
<h2>{logitr}</h2>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>model_logitr <span class="ot">&lt;-</span> <span class="fu">logitr</span>(</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">data      =</span> yogurt,</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">outcome   =</span> <span class="st">&#39;choice&#39;</span>,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">obsID     =</span> <span class="st">&#39;obsID&#39;</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">panelID   =</span> <span class="st">&#39;id&#39;</span>,</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">pars      =</span> <span class="fu">c</span>(<span class="st">&#39;feat&#39;</span>, <span class="st">&#39;brand&#39;</span>),</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">scalePar  =</span> <span class="st">&#39;price&#39;</span>,</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">randPars  =</span> <span class="fu">c</span>(<span class="at">feat =</span> <span class="st">&quot;n&quot;</span>, <span class="at">brand =</span> <span class="st">&quot;n&quot;</span>),</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">startVals =</span> start_wtp,</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">numDraws  =</span> numDraws_wtp</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>{logitr} converges, even without running a multi-start:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_logitr)</span></code></pre></div>
<pre><code>#&gt; =================================================
#&gt; 
#&gt; Model estimated on: Sat Oct 01 16:46:57 2022 
#&gt; 
#&gt; Using logitr version: 0.8.0 
#&gt; 
#&gt; Call:
#&gt; logitr(data = yogurt, outcome = &quot;choice&quot;, obsID = &quot;obsID&quot;, pars = c(&quot;feat&quot;, 
#&gt;     &quot;brand&quot;), scalePar = &quot;price&quot;, randPars = c(feat = &quot;n&quot;, brand = &quot;n&quot;), 
#&gt;     panelID = &quot;id&quot;, startVals = start_wtp, numDraws = numDraws_wtp, 
#&gt;     numCores = numCores)
#&gt; 
#&gt; Frequencies of alternatives:
#&gt;        1        2        3        4 
#&gt; 0.415721 0.029984 0.170989 0.383306 
#&gt; 
#&gt; Exit Status: 3, Optimization stopped because ftol_rel or ftol_abs was reached.
#&gt;                                  
#&gt; Model Type:           Mixed Logit
#&gt; Model Space:   Willingness-to-Pay
#&gt; Model Run:                 1 of 1
#&gt; Iterations:                    85
#&gt; Elapsed Time:            0h:0m:4s
#&gt; Algorithm:         NLOPT_LD_LBFGS
#&gt; Weights Used?:              FALSE
#&gt; Panel ID:                      id
#&gt; Robust?                     FALSE
#&gt; 
#&gt; Model Coefficients: 
#&gt;                   Estimate Std. Error z-value  Pr(&gt;|z|)    
#&gt; scalePar          0.388098   0.050706  7.6538 1.954e-14 ***
#&gt; feat              1.738832   0.725107  2.3980   0.01648 *  
#&gt; brandhiland     -13.536714   1.810701 -7.4760 7.661e-14 ***
#&gt; brandweight      -4.510068   1.015856 -4.4397 9.010e-06 ***
#&gt; brandyoplait      6.663869   0.929658  7.1681 7.605e-13 ***
#&gt; sd_feat           0.491225   1.072013  0.4582   0.64679    
#&gt; sd_brandhiland    5.730571   1.125803  5.0902 3.577e-07 ***
#&gt; sd_brandweight   11.420500   1.727799  6.6099 3.847e-11 ***
#&gt; sd_brandyoplait   8.872470   1.366376  6.4934 8.390e-11 ***
#&gt; ---
#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
#&gt;                                      
#&gt; Log-Likelihood:          -732.2132421
#&gt; Null Log-Likelihood:    -1710.6872416
#&gt; AIC:                     1482.4264842
#&gt; BIC:                     1528.4886000
#&gt; McFadden R2:                0.5719771
#&gt; Adj McFadden R2:            0.5667161
#&gt; Number of Observations:  1234.0000000
#&gt; 
#&gt; Summary of 10k Draws for Random Coefficients: 
#&gt;              Min.     1st Qu.     Median       Mean   3rd Qu. Max.
#&gt; feat         -Inf   1.4071720   1.738457   1.738145  2.069629  Inf
#&gt; brandhiland  -Inf -17.4039453 -13.538553 -13.542027 -9.674388  Inf
#&gt; brandweight  -Inf -12.2189602  -4.519436  -4.527690  3.182253  Inf
#&gt; brandyoplait -Inf   0.6670773   6.648678   6.641070 12.632059  Inf</code></pre>
<p>Including a multi-start helps build confidence in the solution
reached:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>model_logitr <span class="ot">&lt;-</span> <span class="fu">logitr</span>(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">data      =</span> yogurt,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">outcome   =</span> <span class="st">&#39;choice&#39;</span>,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">obsID     =</span> <span class="st">&#39;obsID&#39;</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">panelID   =</span> <span class="st">&#39;id&#39;</span>,</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">pars      =</span> <span class="fu">c</span>(<span class="st">&#39;feat&#39;</span>, <span class="st">&#39;brand&#39;</span>),</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">scalePar  =</span> <span class="st">&#39;price&#39;</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">randPars  =</span> <span class="fu">c</span>(<span class="at">feat =</span> <span class="st">&quot;n&quot;</span>, <span class="at">brand =</span> <span class="st">&quot;n&quot;</span>),</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">startVals =</span> start_wtp,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">numDraws  =</span> numDraws_wtp,</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">numMultiStarts =</span> <span class="dv">10</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model_logitr)</span></code></pre></div>
<pre><code>#&gt; =================================================
#&gt; 
#&gt; Model estimated on: Sat Oct 01 16:46:57 2022 
#&gt; 
#&gt; Using logitr version: 0.8.0 
#&gt; 
#&gt; Call:
#&gt; logitr(data = yogurt, outcome = &quot;choice&quot;, obsID = &quot;obsID&quot;, pars = c(&quot;feat&quot;, 
#&gt;     &quot;brand&quot;), scalePar = &quot;price&quot;, randPars = c(feat = &quot;n&quot;, brand = &quot;n&quot;), 
#&gt;     panelID = &quot;id&quot;, startVals = start_wtp, numDraws = numDraws_wtp, 
#&gt;     numCores = numCores)
#&gt; 
#&gt; Frequencies of alternatives:
#&gt;        1        2        3        4 
#&gt; 0.415721 0.029984 0.170989 0.383306 
#&gt; 
#&gt; Exit Status: 3, Optimization stopped because ftol_rel or ftol_abs was reached.
#&gt;                                  
#&gt; Model Type:           Mixed Logit
#&gt; Model Space:   Willingness-to-Pay
#&gt; Model Run:                 1 of 1
#&gt; Iterations:                    85
#&gt; Elapsed Time:            0h:0m:4s
#&gt; Algorithm:         NLOPT_LD_LBFGS
#&gt; Weights Used?:              FALSE
#&gt; Panel ID:                      id
#&gt; Robust?                     FALSE
#&gt; 
#&gt; Model Coefficients: 
#&gt;                   Estimate Std. Error z-value  Pr(&gt;|z|)    
#&gt; scalePar          0.388098   0.050706  7.6538 1.954e-14 ***
#&gt; feat              1.738832   0.725107  2.3980   0.01648 *  
#&gt; brandhiland     -13.536714   1.810701 -7.4760 7.661e-14 ***
#&gt; brandweight      -4.510068   1.015856 -4.4397 9.010e-06 ***
#&gt; brandyoplait      6.663869   0.929658  7.1681 7.605e-13 ***
#&gt; sd_feat           0.491225   1.072013  0.4582   0.64679    
#&gt; sd_brandhiland    5.730571   1.125803  5.0902 3.577e-07 ***
#&gt; sd_brandweight   11.420500   1.727799  6.6099 3.847e-11 ***
#&gt; sd_brandyoplait   8.872470   1.366376  6.4934 8.390e-11 ***
#&gt; ---
#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
#&gt;                                      
#&gt; Log-Likelihood:          -732.2132421
#&gt; Null Log-Likelihood:    -1710.6872416
#&gt; AIC:                     1482.4264842
#&gt; BIC:                     1528.4886000
#&gt; McFadden R2:                0.5719771
#&gt; Adj McFadden R2:            0.5667161
#&gt; Number of Observations:  1234.0000000
#&gt; 
#&gt; Summary of 10k Draws for Random Coefficients: 
#&gt;              Min.     1st Qu.     Median       Mean   3rd Qu. Max.
#&gt; feat         -Inf   1.4071720   1.738457   1.738145  2.069629  Inf
#&gt; brandhiland  -Inf -17.4039453 -13.538553 -13.542027 -9.674388  Inf
#&gt; brandweight  -Inf -12.2189602  -4.519436  -4.527690  3.182253  Inf
#&gt; brandyoplait -Inf   0.6670773   6.648678   6.641070 12.632059  Inf</code></pre>
</div>
<div id="mixl" class="section level2">
<h2>{mixl}</h2>
<p>First attempt using same starting points as {logitr}</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>model_mixl <span class="ot">&lt;-</span> <span class="fu">estimate</span>(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    mixl_spec_wtp, start_wtp,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    data_mixl, availabilities,</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">nDraws =</span> numDraws_wtp</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>{mixl} converges to a local minimum:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">logLik</span>(model_logitr), <span class="fu">logLik</span>(model_mixl))</span></code></pre></div>
<pre><code>#&gt; [1]  -732.2132 -1544.8531</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(<span class="fu">coef</span>(model_logitr), <span class="fu">coef</span>(model_mixl))</span></code></pre></div>
<pre><code>#&gt;                        [,1]        [,2]
#&gt; scalePar          0.3880976 -2270.55731
#&gt; feat              1.7388324    42.24281
#&gt; brandhiland     -13.5367140    24.36731
#&gt; brandweight      -4.5100684   110.99687
#&gt; brandyoplait      6.6638687  -492.36959
#&gt; sd_feat           0.4912255    10.81470
#&gt; sd_brandhiland    5.7305708    10.23414
#&gt; sd_brandweight   11.4204997   334.92761
#&gt; sd_brandyoplait   8.8724698   915.14924</code></pre>
<p>Second attempt using {logitr} solution as starting points</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>model_mixl <span class="ot">&lt;-</span> <span class="fu">estimate</span>(</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    mixl_spec_wtp, <span class="fu">coef</span>(model_logitr),</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    data_mixl, availabilities,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">nDraws =</span> numDraws_wtp</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Again, {mixl} converges to a local minimum:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">logLik</span>(model_logitr), <span class="fu">logLik</span>(model_mixl))</span></code></pre></div>
<pre><code>#&gt; [1]  -732.2132 -1544.8531</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(<span class="fu">coef</span>(model_logitr), <span class="fu">coef</span>(model_mixl))</span></code></pre></div>
<pre><code>#&gt;                        [,1]        [,2]
#&gt; scalePar          0.3880976 -2270.55731
#&gt; feat              1.7388324    42.24281
#&gt; brandhiland     -13.5367140    24.36731
#&gt; brandweight      -4.5100684   110.99687
#&gt; brandyoplait      6.6638687  -492.36959
#&gt; sd_feat           0.4912255    10.81470
#&gt; sd_brandhiland    5.7305708    10.23414
#&gt; sd_brandweight   11.4204997   334.92761
#&gt; sd_brandyoplait   8.8724698   915.14924</code></pre>
</div>
<div id="gmnl" class="section level2">
<h2>{gmnl}</h2>
<p>First attempt using same starting points as {logitr}. Note that
additional starting parameters must be added as the {gmnl} approach to
estimating WTP is a slightly different model.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>model_gmnl <span class="ot">&lt;-</span> <span class="fu">gmnl</span>(</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> data_gmnl,</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">formula =</span> choice <span class="sc">~</span> price <span class="sc">+</span> feat <span class="sc">+</span> brand <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> <span class="dv">1</span>,</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">ranp =</span> <span class="fu">c</span>(</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">feat =</span> <span class="st">&quot;n&quot;</span>, <span class="at">brandhiland =</span> <span class="st">&quot;n&quot;</span>, <span class="at">brandweight =</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">brandyoplait =</span> <span class="st">&quot;n&quot;</span>),</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">fixed =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="fu">rep</span>(<span class="cn">FALSE</span>, <span class="dv">10</span>), <span class="cn">TRUE</span>),</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">model =</span> <span class="st">&quot;gmnl&quot;</span>,</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">&quot;bfgs&quot;</span>,</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">haltons =</span> <span class="cn">NA</span>,</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel =</span> <span class="cn">TRUE</span>,</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">start =</span> <span class="fu">c</span>(start_wtp, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="dv">0</span>),</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">R =</span> numDraws_wtp</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>{gmnl} converges to a local minimum:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">logLik</span>(model_logitr), <span class="fu">logLik</span>(model_gmnl))</span></code></pre></div>
<pre><code>#&gt; [1]  -732.2132 -1710.6872</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(<span class="fu">coef</span>(model_logitr), <span class="fu">coef</span>(model_gmnl))</span></code></pre></div>
<pre><code>#&gt;                        [,1]         [,2]
#&gt; feat              0.3880976    8.1540692
#&gt; brandhiland       1.7388324    4.4266391
#&gt; brandweight     -13.5367140   20.9581382
#&gt; brandyoplait     -4.5100684  -93.0969112
#&gt; het.(Intercept)   6.6638687 -440.5183170
#&gt; sd.feat           0.4912255    2.4208585
#&gt; sd.brandhiland    5.7305708    0.1085233
#&gt; sd.brandweight   11.4204997   53.2376327
#&gt; sd.brandyoplait   8.8724698   95.0008933
#&gt; tau               0.3880976  653.9956379</code></pre>
<p>Second attempt using {logitr} solution as starting points:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>model_gmnl <span class="ot">&lt;-</span> <span class="fu">gmnl</span>(</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> data_gmnl,</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">formula =</span> choice <span class="sc">~</span> price <span class="sc">+</span> feat <span class="sc">+</span> brand <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> <span class="dv">1</span>,</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">ranp =</span> <span class="fu">c</span>(</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">feat =</span> <span class="st">&quot;n&quot;</span>, <span class="at">brandhiland =</span> <span class="st">&quot;n&quot;</span>, <span class="at">brandweight =</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">brandyoplait =</span> <span class="st">&quot;n&quot;</span>),</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">fixed =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="fu">rep</span>(<span class="cn">FALSE</span>, <span class="dv">10</span>), <span class="cn">TRUE</span>),</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">model =</span> <span class="st">&quot;gmnl&quot;</span>,</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">&quot;bfgs&quot;</span>,</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">haltons =</span> <span class="cn">NA</span>,</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel =</span> <span class="cn">TRUE</span>,</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">start =</span> <span class="fu">c</span>(<span class="fu">coef</span>(model_logitr), <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="dv">0</span>),</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">R =</span> numDraws_wtp</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>#&gt; Error in optim(par = c(feat = 1.74, brandhiland = -13.54, brandweight = -4.51,  :
#&gt; initial value in &#39;vmmin&#39; is not finite</code></pre>
<p>In this case, {gmnl} fails due to an error with the starting values
provided.</p>
</div>
<div id="apollo" class="section level2">
<h2>{apollo}</h2>
<p>First attempt using same starting points as {logitr}:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>model_apollo <span class="ot">&lt;-</span> <span class="fu">apollo_estimate</span>(</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">apollo_beta          =</span> start_wtp,</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">apollo_fixed         =</span> <span class="cn">NULL</span>,</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">apollo_probabilities =</span> apollo_probabilities_wtp,</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">apollo_inputs        =</span> apollo_inputs_wtp,</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate_settings    =</span> <span class="fu">list</span>(<span class="at">printLevel =</span> <span class="dv">0</span>)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>{apollo} converges to a local minimum:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">logLik</span>(model_logitr), <span class="fu">logLik</span>(model_apollo))</span></code></pre></div>
<pre><code>#&gt; [1] -732.2132 -776.5525</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(<span class="fu">coef</span>(model_logitr), <span class="fu">coef</span>(model_apollo))</span></code></pre></div>
<pre><code>#&gt;                        [,1]          [,2]
#&gt; scalePar          0.3880976    0.02264706
#&gt; feat              1.7388324   52.92881692
#&gt; brandhiland     -13.5367140 -129.27886303
#&gt; brandweight      -4.5100684 -104.76878544
#&gt; brandyoplait      6.6638687   23.77062341
#&gt; sd_feat           0.4912255   11.06432598
#&gt; sd_brandhiland    5.7305708  -86.57222932
#&gt; sd_brandweight   11.4204997  164.38217567
#&gt; sd_brandyoplait   8.8724698  156.45076147</code></pre>
<p>Second attempt using {logitr} solution as starting points:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>model_apollo <span class="ot">&lt;-</span> <span class="fu">apollo_estimate</span>(</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">apollo_beta          =</span> <span class="fu">coef</span>(model_logitr),</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">apollo_fixed         =</span> <span class="cn">NULL</span>,</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">apollo_probabilities =</span> apollo_probabilities_wtp,</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">apollo_inputs        =</span> apollo_inputs_wtp,</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate_settings    =</span> <span class="fu">list</span>(<span class="at">printLevel =</span> <span class="dv">0</span>)</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Again, {apollo} converges to a local minimum:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="fu">logLik</span>(model_logitr), <span class="fu">logLik</span>(model_apollo))</span></code></pre></div>
<pre><code>#&gt; [1] -732.2132 -772.6268</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(<span class="fu">coef</span>(model_logitr), <span class="fu">coef</span>(model_apollo))</span></code></pre></div>
<pre><code>#&gt;                        [,1]          [,2]
#&gt; scalePar          0.3880976  2.180707e-03
#&gt; feat              1.7388324  7.365495e+02
#&gt; brandhiland     -13.5367140 -2.378832e+03
#&gt; brandweight      -4.5100684 -1.382908e+03
#&gt; brandyoplait      6.6638687  1.571897e+02
#&gt; sd_feat           0.4912255 -3.484523e+02
#&gt; sd_brandhiland    5.7305708  9.805109e+02
#&gt; sd_brandweight   11.4204997  1.899130e+03
#&gt; sd_brandyoplait   8.8724698  1.211976e+03</code></pre>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
